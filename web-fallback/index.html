<!doctype html>
<html lang="pt-PT">
<head>
  <meta charset="utf-8" />
  <meta name="viewport" content="width=device-width,initial-scale=1" />
  <title>FUT - Auth Callback</title>
  <style>
    body { font-family: system-ui, -apple-system, "Segoe UI", Roboto, "Helvetica Neue", Arial; display:flex; align-items:center; justify-content:center; height:100vh; margin:0; background:#0f1720; color:#e6eef8 }
    .box { max-width:720px; padding:28px; text-align:center; border-radius:12px; background:rgba(255,255,255,0.04); box-shadow:0 6px 30px rgba(0,0,0,0.6) }
    a.button { display:inline-block; margin-top:16px; padding:10px 16px; background:#2ecc71; color:#062018; border-radius:8px; text-decoration:none; font-weight:600 }
    .muted { color:#b8c2cf; font-size:14px }
  </style>
</head>
<body>
  <div class="box">
    <h1>Redireccionando para a app…</h1>
    <p class="muted">Se não abrir automaticamente, clique em "Abrir app". Se não tiver a app instalada, será mostrado o fragmento.</p>
    <a id="open" class="button">Abrir app</a>
    <pre id="fallback" style="text-align:left;margin-top:16px;background:rgba(0,0,0,0.25);padding:12px;border-radius:8px;overflow:auto;max-height:240px"></pre>
  </div>

  <script>
    (function(){
      // Lê fragmento (#...) ou query string (?...) e reencaminha para o deep link da app.
      const hash = window.location.hash ? window.location.hash.substring(1) : '';
      const query = (!hash && window.location.search) ? window.location.search.substring(1) : '';
      const params = hash || query || '';
      const appScheme = 'futapp://auth-callback';
      const appUrl = params ? (appScheme + '#' + params) : appScheme;

      // Atualiza UI
      document.getElementById('open').href = appUrl;
      document.getElementById('fallback').textContent = appUrl;

      // Tenta abrir a app automaticamente
      // Nota: os browsers modernos podem bloquear tentativas automáticas; ainda assim esta é a melhor tentativa.
      setTimeout(() => {
        window.location.href = appUrl;
      }, 500);

      // Se quiser, após X ms mostrar instruções adicionais
    })();
  </script>
</body>
</html>
